<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.shape.Circle?>

<StackPane xmlns="http://javafx.com/javafx"
           xmlns:fx="http://javafx.com/fxml"
           fx:controller="org.hotiver.sittingtimer.controller.TimerController"
           prefWidth="420" prefHeight="340"
           styleClass="root-pane">

    <Circle radius="120" fill="#6366f1" opacity="0.05" StackPane.alignment="TOP_LEFT" translateY="-30" translateX="-30"/>

    <VBox alignment="CENTER" spacing="20" styleClass="main-content">
        <VBox alignment="CENTER" spacing="5">
            <Label fx:id="infoLabel" text="SITTING SESSION" styleClass="info-label"/>
            <Label fx:id="timerLabel" text="00:00:00" styleClass="timer-label"/>
        </VBox>
        <Button fx:id="startButton" text="Start" onAction="#toggleTimer" styleClass="btn-primary"/>
    </VBox>

    <Button text="⚙" styleClass="btn-icon" StackPane.alignment="BOTTOM_RIGHT" onAction="#openSettings">
        <StackPane.margin>
            <Insets bottom="15" right="15"/>
        </StackPane.margin>
    </Button>

    <HBox spacing="8" alignment="TOP_RIGHT" StackPane.alignment="TOP_RIGHT" pickOnBounds="false" maxWidth="-Infinity" maxHeight="-Infinity">
        <StackPane.margin>
            <Insets top="12" right="12"/>
        </StackPane.margin>
        <Button text="—" onAction="#minimizeWindow" styleClass="window-control-btn"/>
        <Button text="✕" onAction="#hideToTray" styleClass="window-control-btn, close-btn"/>
    </HBox>

    <VBox fx:id="settingsPane" visible="false" styleClass="modal-overlay" alignment="CENTER">
        <VBox spacing="20" alignment="CENTER" styleClass="modal-card" maxWidth="380">
            <Label text="Preferences" styleClass="modal-title"/>
            <VBox spacing="12" styleClass="settings-group">
                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Label text="Work (s):" styleClass="field-label" HBox.hgrow="ALWAYS" maxWidth="Infinity"/>
                    <TextField fx:id="workSecondsField" prefWidth="70" styleClass="dark-input"/>
                </HBox>
                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Label text="Rest (s):" styleClass="field-label" HBox.hgrow="ALWAYS" maxWidth="Infinity"/>
                    <TextField fx:id="restSecondsField" prefWidth="70" styleClass="dark-input"/>
                </HBox>
                <Separator opacity="0.1"/>
                <VBox spacing="8">
                    <HBox alignment="CENTER_LEFT">
                        <Label text="Volume" styleClass="field-label" HBox.hgrow="ALWAYS" maxWidth="Infinity"/>
                        <Label fx:id="volValue" text="100%" styleClass="value-text" style="-fx-text-fill: white;"/>
                    </HBox>
                    <Slider fx:id="volumeSlider" min="0.0" max="1.0" styleClass="modern-slider"/>
                </VBox>
                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Label text="Mute Sounds" styleClass="field-label" HBox.hgrow="ALWAYS" maxWidth="Infinity"/>
                    <Button fx:id="muteButton" onAction="#toggleMute" styleClass="btn-toggle"/>
                </HBox>
            </VBox>
            <HBox spacing="10" alignment="CENTER">
                <Button text="Save" onAction="#saveSettings" styleClass="btn-primary-small" style="-fx-padding: 8 20;"/>
                <Button text="Close" onAction="#closeSettings" styleClass="btn-icon" style="-fx-font-size: 13px;"/>
            </HBox>
        </VBox>
    </VBox>

    <VBox fx:id="overlayPane" visible="false" styleClass="modal-overlay" alignment="CENTER">
        <VBox spacing="20" alignment="CENTER" styleClass="modal-card" maxWidth="300" style="-fx-padding: 40;">
            <Label fx:id="overlayMessage" text="Time to Rest!" styleClass="modal-title"/>
            <Button text="Understood" onAction="#closeOverlay" styleClass="btn-primary"/>
        </VBox>
    </VBox>

</StackPane>